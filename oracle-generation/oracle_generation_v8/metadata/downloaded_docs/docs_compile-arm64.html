<!doctype html><html lang=en><meta charset=utf-8><title>Compiling on Arm64 Linux · V8</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/_css/main.css rel=stylesheet><link href=/favicon.png rel=icon sizes=48x48><link href=/.webmanifest rel=manifest><meta content=#4285F4 name=theme-color><link href=/blog.atom rel=alternate title="V8 Atom feed" type=application/atom+xml><link href=/features.atom rel=alternate title="V8 JS/Wasm features Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><meta content="Tips and tricks to build V8 natively on Arm64 Linux" name=description><header id=header><h1><a href=/ >V8</a></h1><a href=#navigation-toggle id=nav-toggle>Show navigation</a><nav><ul><li><a href=/ >Home</a><li><a href=/blog>Blog</a><li class=current><a href=/docs>Docs</a><li><a href=/tools>Tools</a><li><a href=/features title="JavaScript and WebAssembly language features">JS/Wasm features</a><li><a href=/grant>Research</a></ul></nav></header><main id=main><h1>Compiling on Arm64 Linux</h1><p>If you've gone through instructions on how to <a href=/docs/source-code>check out</a> and <a href=/docs/build-gn>build</a> V8 on a machine that is neither x86 nor an Apple Silicon Mac, you may have ran into a bit of trouble, due to the build system downloading native binaries and then not being able to run them. However, even though using an Arm64 Linux machine to work on V8 is <strong>not officially supported</strong>, overcoming those hurdles is pretty straightforward.<h2 id=bypassing-vpython tabindex=-1>Bypassing <code>vpython</code> <a href=#bypassing-vpython class=bookmark>#</a></h2><p><code>fetch v8</code>, <code>gclient sync</code> and other <code>depot_tools</code> commands use a wrapper for python called "vpython". If you see errors related to it, you can define the following variable to use the system's python installation instead:<pre class=language-bash><code class=language-bash><span class="token builtin class-name">export</span> <span class="token assign-left variable">VPYTHON_BYPASS</span><span class="token operator">=</span><span class="token string">"manually managed python not supported by chrome operations"</span></code></pre><h2 id=compatible-ninja-binary tabindex=-1>Compatible <code>ninja</code> binary <a href=#compatible-ninja-binary class=bookmark>#</a></h2><p>The first thing to do is to make sure we use a native binary for <code>ninja</code>, which we pick instead of the one in <code>depot_tools</code>. A simple way to do this is to tweak your PATH as follows when installing <code>depot_tools</code>:<pre class=language-bash><code class=language-bash><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token constant environment">PATH</span></span><span class="token operator">=</span><span class="token constant environment">$PATH</span>:/path/to/depot_tools</code></pre><p>This way, you'll be able to use your system's <code>ninja</code> installation, given it's likely to be available. Although if it isn't you can <a href=https://github.com/ninja-build/ninja#building-ninja-itself>build it from source</a>.<h2 id=compiling-clang tabindex=-1>Compiling clang <a href=#compiling-clang class=bookmark>#</a></h2><p>By default, V8 will want to use its own build of clang that may not run on your machine. You could tweak GN arguments in order to <a href=#system_clang_gcc>use the system's clang or GCC</a>, however, you may want to use the same clang as upstream, as it will be the most supported version.<p>You can build it locally directly from the V8 checkout:<pre class=language-bash><code class=language-bash>./tools/clang/scripts/build.py --without-android --without-fuchsia <span class="token punctuation">\</span><br>                               --host-cc<span class="token operator">=</span>gcc --host-cxx<span class="token operator">=</span>g++ <span class="token punctuation">\</span><br>                               --gcc-toolchain<span class="token operator">=</span>/usr <span class="token punctuation">\</span><br>                               --use-system-cmake --disable-asserts</code></pre><h2 id=setting-up-gn-arguments-manually tabindex=-1>Setting up GN arguments manually <a href=#setting-up-gn-arguments-manually class=bookmark>#</a></h2><p>Convenience scripts may not work by default, instead you'll have to set GN arguments manually following the <a href=/docs/build-gn#gn>manual</a> workflow. You can get the usual "release", "optdebug" and "debug" configurations with the following arguments:<ul><li><code>release</code></ul><pre class=language-bash><code class=language-bash><span class="token assign-left variable">is_debug</span><span class="token operator">=</span>false</code></pre><ul><li><code>optdebug</code></ul><pre class=language-bash><code class=language-bash><span class="token assign-left variable">is_debug</span><span class="token operator">=</span>true<br><span class="token assign-left variable">v8_enable_backtrace</span><span class="token operator">=</span>true<br><span class="token assign-left variable">v8_enable_slow_dchecks</span><span class="token operator">=</span>true</code></pre><ul><li><code>debug</code></ul><pre class=language-bash><code class=language-bash><span class="token assign-left variable">is_debug</span><span class="token operator">=</span>true<br><span class="token assign-left variable">v8_enable_backtrace</span><span class="token operator">=</span>true<br><span class="token assign-left variable">v8_enable_slow_dchecks</span><span class="token operator">=</span>true<br><span class="token assign-left variable">v8_optimized_debug</span><span class="token operator">=</span>false</code></pre><h2 id=system_clang_gcc tabindex=-1>Using the system's clang or GCC <a href=#system_clang_gcc class=bookmark>#</a></h2><p>Building with GCC is only a case of disabling compiling with clang:<pre class=language-bash><code class=language-bash><span class="token assign-left variable">is_clang</span><span class="token operator">=</span>false</code></pre><p>Note that by default, V8 will link using <code>lld</code>, which requires a recent version of GCC. You can use <code>use_lld=false</code> to switch to the gold linker, or additionally use <code>use_gold=false</code> to use <code>ld</code>.<p>If you'd like to use the clang that's installed with your system, say in <code>/usr</code>, you can use the following arguments:<pre class=language-bash><code class=language-bash><span class="token assign-left variable">clang_base_path</span><span class="token operator">=</span><span class="token string">"/usr"</span><br><span class="token assign-left variable">clang_use_chrome_plugins</span><span class="token operator">=</span>false</code></pre><p>However, given the system's clang version may not be well supported, you're likely to deal with warnings, such as unknown compiler flags. In this case it's useful to stop treating warnings as errors with:<pre class=language-bash><code class=language-bash><span class="token assign-left variable">treat_warnings_as_errors</span><span class="token operator">=</span>false</code></pre></main><footer id=footer><div><nav><a href=/logo>Branding</a> <a href=/terms>Terms</a> <a href=https://policies.google.com/privacy>Privacy</a> <a href=https://twitter.com/v8js rel="me nofollow">Twitter</a> <a href=https://github.com/v8/v8.dev/tree/main/./src/docs/compile-arm64.md rel=nofollow>Edit this page on GitHub</a></nav><dark-mode-toggle dark="Light Mode" light="Dark Mode" permanent></dark-mode-toggle></div><p><small>Except as otherwise noted, any code samples from the V8 project are licensed under <a href=https://chromium.googlesource.com/v8/v8.git/+/main/LICENSE>V8’s BSD-style license</a>. Other content on this page is licensed under <a href=https://creativecommons.org/licenses/by/3.0/ >the Creative Commons Attribution 3.0 License</a>. For details, see <a href=/terms#site-policies>our site policies</a>.</small></footer><script src=/_js/dark-mode-toggle.mjs type=module></script><script src=/_js/main.js></script>